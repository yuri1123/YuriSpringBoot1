<!doctype html>
<html lang="ko">
<html xmlns:th="http://www.thymleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"></html>
<head>

</head>
<body>

<th:block th:include="@{/header.html}"></th:block>
<div class="container">
    <div class="row">
        <div class="col-sm-1"></div>
        <div class="col-sm-10">
            <h1>[[${board.subject}]]<span style="font-size:14px;"> ğŸ‘ï¸ ì¡°íšŒìˆ˜ : [[${board.viewcount}]]</span></h1>

            <table class="table text-center table-bordered border-primary">
                <colgroup>
                    <col style="width: 30%;">
                    <col style="width: 70%; ">
                </colgroup>
                <tr>
                    <th class="text-right">ê¸€ë²ˆí˜¸</th>
                    <td class="text-left" style="padding-left:10px;">[[${board.id}]]</td>
                </tr>

                <tr>
                    <th class="text-right">ê¸€ì œëª©</th>
                    <td class="text-left" style="padding-left:10px;">[[${board.subject}]]</td>
                </tr>
                <tr>
                    <th class="text-right">ê¸€ë‚´ìš©</th>
                    <td class="text-left" style="height: 300px; padding-left:10px">[[${board.content}]]</td>
                </tr>
                <tr>
                    <th class="text-right">ì‘ì„±ì</th>
                    <td class="text-left" style="padding-left:10px;">[[${board.createdby}]]</td>
                </tr>
                <tr>
                    <th class="text-right" >ì‘ì„±ì¼ì</th>
                    <td class="text-left" style="padding-left:10px;">[[${board.regdate}]]</td>
                </tr>
            </table>
            <p class="btn_set text-center">
                <button type="button" onclick="goWritePage();" class="btns btn_bdr3 btn_mid">ìˆ˜ì •</button>
                <button type="button" onclick="deletePost();" class="btns btn_bdr3 btn_mid">ì‚­ì œ</button>
                <button type="button" onclick="goListPage();" class="btns btn_bdr3 btn_mid">ë’¤ë¡œ</button>
            </p>
        </div>
        <div class="col-sm-1"></div>
    </div>
</div>

<script>
    // ê²Œì‹œê¸€ ìˆ˜ì • í˜ì´ì§€ë¡œ ì´ë™
    function goWritePage() {
        location.href = '/updateboard/' + location.search;
    }

    // ê²Œì‹œê¸€ ì‚­ì œ
    function deletePost() {

        const id = [[ ${board.id}]];

        if (!confirm(id + 'ë²ˆ ê²Œì‹œê¸€ì„ ì‚­ì œí• ê¹Œìš”?')) {
            return false;
        }

        let inputHtml = '';

        new URLSearchParams(location.search).forEach((value, key) => {
            inputHtml += `<input type="hidden" name="${key}" value="${value}" />`;
        })

        const formHtml = `
            <form id="deleteForm" action="/deleteboard/" method="post">
                ${inputHtml}
            </form>
        `;

        const doc = new DOMParser().parseFromString(formHtml, 'text/html');
        const form = doc.body.firstChild;
        document.body.append(form);
        document.getElementById('deleteForm').submit();
    }

    // ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€ë¡œ ì´ë™
    function goListPage() {
        const queryString = new URLSearchParams(location.search);
        queryString.delete('id');
        location.href = '/board + ' ? ' + queryString.toString();
    }
</script>

<hr>
<th:block th:include="@{/footer.html}"></th:block>

</body>
</html>